{"version":3,"sources":["pictures-test.js"],"names":["beforeEach","t","srv","context","url","image","getImage","body","uri","publicId","json","deepEqual","options","method","description","src","userId","resolveWithFullResponse","response","is","statusCode","todo"],"mappings":"AAAA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;AAJA;;;AAMA,cAAKA,UAAL;AAAA,+BAAgB,WAAMC,CAAN,EAAW;AACzB,QAAIC,MAAM,wCAAV;AACAD,MAAEE,OAAF,CAAUC,GAAV,GAAgB,MAAM,0BAAOF,GAAP,CAAtB;AACD,GAHD;;AAAA;AAAA;AAAA;AAAA;;AAKA,mBAAK,UAAL;AAAA,gCAAiB,WAAMD,CAAN,EAAW;AAC1B,QAAII,QAAQ,mBAASC,QAAT,EAAZ;AACA,QAAIF,MAAMH,EAAEE,OAAF,CAAUC,GAApB;;AAEA,QAAIG,OAAO,MAAM,8BAAQ,EAAEC,KAAM,GAAEJ,GAAI,IAAGC,MAAMI,QAAS,EAAhC,EAAmCC,MAAM,IAAzC,EAAR,CAAjB;AACAT,MAAEU,SAAF,CAAYJ,IAAZ,EAAkBF,KAAlB;AACD,GAND;;AAAA;AAAA;AAAA;AAAA;;AAQA,mBAAK,QAAL;AAAA,gCAAe,WAAMJ,CAAN,EAAW;AACxB,QAAII,QAAQ,mBAASC,QAAT,EAAZ;AACA,QAAIF,MAAMH,EAAEE,OAAF,CAAUC,GAApB;;AAEA,QAAIQ,UAAU;AACZC,cAAQ,MADI;AAEZL,WAAKJ,GAFO;AAGZM,YAAM,IAHM;AAIZH,YAAM;AACJO,qBAAaT,MAAMS,WADf;AAEJC,aAAKV,MAAMU,GAFP;AAGJC,gBAAQX,MAAMW;AAHV,OAJM;AASZC,+BAAyB;AATb,KAAd;;AAYA,QAAIC,WAAW,MAAM,8BAAQN,OAAR,CAArB;AACAX,MAAEkB,EAAF,CAAKD,SAASE,UAAd,EAA0B,GAA1B;AACAnB,MAAEU,SAAF,CAAYO,SAASX,IAArB,EAA2BF,KAA3B;AACD,GAnBD;;AAAA;AAAA;AAAA;AAAA;AAoBA,cAAKgB,IAAL,CAAU,gBAAV","file":"pictures-test.js","sourcesContent":["'use strict'\n\nimport test from 'ava'\nimport micro from 'micro'\n// import uuid from 'uuid-base62'\nimport listen from 'test-listen'\nimport request from 'request-promise'\nimport pictures from '../pictures'\nimport fixtures from './fixtures'\n\ntest.beforeEach(async t => {\n  let srv = micro(pictures)\n  t.context.url = await listen(srv)\n})\n\ntest('GET /:id', async t => {\n  let image = fixtures.getImage()\n  let url = t.context.url\n\n  let body = await request({ uri: `${url}/${image.publicId}`, json: true })\n  t.deepEqual(body, image)\n})\n\ntest('POST /', async t => {\n  let image = fixtures.getImage()\n  let url = t.context.url\n\n  let options = {\n    method: 'POST',\n    uri: url,\n    json: true,\n    body: {\n      description: image.description,\n      src: image.src,\n      userId: image.userId\n    },\n    resolveWithFullResponse: true\n  }\n\n  let response = await request(options)\n  t.is(response.statusCode, 201)\n  t.deepEqual(response.body, image)\n})\ntest.todo('POST /:id/like')\n"]}